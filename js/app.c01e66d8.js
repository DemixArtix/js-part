(function(){var t={430:function(t,e,n){"use strict";var o=n(9242),r=n(3396);const a={class:"container flex"},i={class:"goods__list basis-7/12"};function s(t,e,n,o,s,l){const u=(0,r.up)("goodsCategory"),c=(0,r.up)("cart");return(0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("div",i,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.list,(t=>((0,r.wg)(),(0,r.j4)(u,{category:t,key:t.id},null,8,["category"])))),128))]),(0,r.Wm)(c,{class:"basis-5/12"})])}var l=n(7139);const u={class:"goods-category__title text-left font-bold bg-blue-100 px-2 py-1 flex items-center border-t-rounded text-[13px]",ref:"titleEl"};function c(t,e,n,a,i,s){const c=(0,r.up)("goodsItem");return(0,r.wg)(),(0,r.iD)("div",{class:"goods-category",ref:"categoryEl",style:(0,l.j5)({gridRowEnd:`span ${t.gridRowEnd}`}),onTransitionend:e[1]||(e[1]=(...e)=>t.setSpans&&t.setSpans(...e))},[(0,r._)("div",u,[(0,r._)("div",{class:(0,l.C_)(["goods-category__arrow mt-1 w-2 h-2 border-l-2 border-t-2 mr-2 border-zinc-600 rotate-45 cursor-pointer origin-center transition",{"!rotate-[225deg]":!t.showGoods,"mt-0":!t.showGoods}]),onClick:e[0]||(e[0]=e=>t.showGoods=!t.showGoods)},null,2),(0,r._)("span",null,(0,l.zw)(t.category.title),1)],512),(0,r.Wm)(o.W3,{name:"list",onLeave:t.setSpans,onEnter:t.setSpans},{default:(0,r.w5)((()=>[t.showGoods?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(t.category.goods,(e=>((0,r.wg)(),(0,r.j4)(c,{ref_for:!0,ref:"goodsItemEl",key:e.id,goodsItem:e,categoryId:t.category.id},null,8,["goodsItem","categoryId"])))),128)):(0,r.kq)("",!0)])),_:1},8,["onLeave","onEnter"])],36)}var d=n(4870);const f={class:"goods-item flex pl-2 justify-between items-center border bg-gray-50 text-[11px]"},g={class:"goods-item__name text-left basis-8/12"},p={class:"goods-item__price bg-gray-100 p-2 basis-4/12 flex justify-end items-center"},m={class:"mr-4 font-semibold"};function y(t,e,n,o,a,i){const s=(0,r.up)("g-icon");return(0,r.wg)(),(0,r.iD)("div",f,[(0,r._)("div",g,(0,l.zw)(t.goodsItem.name),1),(0,r._)("div",p,[(0,r._)("span",m,(0,l.zw)(t.goodsItem.price),1),(0,r._)("div",{class:"goods-item__add cursor-pointer",onClick:e[0]||(e[0]=e=>t.onAddToCart())},[(0,r.Wm)(s,{class:"transition hover:fill-green-400",name:"ui/cart"})])])])}var v=n(65),_=(0,r.aZ)({name:"index",props:{categoryId:{type:Number},goodsItem:{type:Object,default:()=>({})}},setup(t){const e=(0,v.oR)();function n(){e.commit("cart/addToCart",{categoryId:t.categoryId,id:t.goodsItem.id,quantity:1,count:t.goodsItem.count})}return{onAddToCart:n}}}),b=n(89);const h=(0,b.Z)(_,[["render",y]]);var C=h,T=(0,r.aZ)({name:"index",components:{goodsItem:C},props:{category:{type:Object,default:()=>({})}},setup(){let t=(0,d.iH)(!0),e=(0,d.iH)(!0),n=(0,d.iH)(!0),o=(0,d.iH)(!0),a=(0,d.iH)(0);function i(t,e){let r=n.value,i=o.value;a.value=Number(((i.reduce(((t,e)=>t+ +e.$el.offsetHeight),0)+r.offsetHeight)/2+1).toFixed(0)),setTimeout(e,500)}return(0,r.bv)((()=>{i(null,(()=>{}))})),(0,r.ic)((()=>{i(null,(()=>{}))})),{showGoods:t,categoryEl:e,titleEl:n,goodsItemEl:o,gridRowEnd:a,setSpans:i}}});const w=(0,b.Z)(T,[["render",c]]);var x=w;const N={class:"cart p-2"},I=(0,r._)("h3",{class:"cart__title text-left font-medium pl-2"},"Корзина",-1),P={class:"cart__list text-[12px]"},k={class:"cart__header flex text-gray-400 border-b"},j={class:"cart__body"},G={key:0,class:"text-left"},O=["onClick"],D=["max","value","onInput"],E={key:0,class:"text-red-300 text-left text-[9px]"},q={key:3,class:"text-left"},B=(0,r._)("span",null," / шт",-1),H={class:"cart__footer flex justify-end p-3"},S=(0,r._)("div",{class:"cart__footer_text text-gray-400"},"Общая стоимость:",-1),F={ref:"totalInt"},Z=(0,r._)("span",null,".",-1),V={ref:"totalFloat"},L=(0,r._)("span",null,"руб.",-1);function M(t,e,n,a,i,s){return(0,r.wg)(),(0,r.iD)("div",N,[I,(0,r._)("div",P,[(0,r._)("div",k,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.listParams,(t=>((0,r.wg)(),(0,r.iD)("div",{class:(0,l.C_)(["cart__header_item text-left p-2",t.widthClass]),key:t},(0,l.zw)(t.name),3)))),128))]),(0,r._)("div",j,[(0,r.Wm)(o.W3,{name:"list"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.goodsList,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"cart__body_item flex p-1 items-center border-b",key:e.categoryId+"key"+e.id},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.listParams,(n=>((0,r.wg)(),(0,r.iD)("div",{class:(0,l.C_)(["cart__header_item flex p-1 flex-col",n.widthClass])},["text"===n.type?((0,r.wg)(),(0,r.iD)("div",G,(0,l.zw)(e[n.field]),1)):"delete"===n.type?((0,r.wg)(),(0,r.iD)("a",{key:1,class:"cursor-pointer",onClick:(0,o.iM)((n=>t.onDelete(e)),["prevent"])},"Удалить",8,O)):"quantity"===n.type?((0,r.wg)(),(0,r.iD)(r.HY,{key:2},[(0,r._)("input",{class:"w-16 p-1 border",type:"number",max:e.count,value:e[n.field],onInput:n=>t.changeQuantity(e,n)},null,40,D),e.count-e.quantity<5?((0,r.wg)(),(0,r.iD)("div",E,"кол-во ограничено: "+(0,l.zw)(e.count-e.quantity),1)):(0,r.kq)("",!0)],64)):"price"===n.type?((0,r.wg)(),(0,r.iD)("div",q,[(0,r._)("strong",null,(0,l.zw)(e[n.field])+" руб.",1),B])):(0,r.kq)("",!0)],2)))),256))])))),128))])),_:1})]),(0,r._)("div",H,[S,(0,r._)("div",{class:(0,l.C_)(["cart__footer_total pl-3 font-bold transition",t.totalColorClass])},[(0,r._)("span",F,"0",512),Z,(0,r._)("span",V,"00",512),L],2)])])])}n(7658);var z=n(2124),A=(0,r.aZ)({name:"index",setup(){const t=(0,v.oR)(),e=(0,r.Fl)((()=>t.getters["cart/cart"])),n=(0,r.Fl)((()=>t.getters["list/course"])),o=(0,d.iH)(null),a=(0,d.iH)(null),i=(0,d.iH)(null);let s=(0,d.iH)("text-gray-400");const l=(0,r.Fl)((()=>e.value.reduce(((e,{id:n,categoryId:o,quantity:r})=>{let{name:a,price:i,count:s}=t.getters["list/rawList"][o].goods[n];return e.push({name:a,price:i,count:s,categoryId:o,id:n,quantity:r}),e}),[]))),u=(0,r.Fl)((()=>l.value.reduce(((t,{price:e,quantity:n})=>t+e*n),0).toFixed(2)));(0,r.YP)(n,(function(t,e){e===t||0==u.value?s.value="text-gray-400":e>t&&u.value>0?s.value="text-green-300":e<t&&u.value>0&&(s.value="text-red-300")})),(0,r.YP)(u,(function(t,e){(0,z.Z)({targets:a.value,textContent:[Math.floor(e),Math.floor(t)],round:1,easing:"easeInOutExpo"}),(0,z.Z)({targets:i.value,textContent:[`${e}`.split(".")[1],`${t}`.split(".")[1]],round:1,easing:"easeInOutExpo"})}));const c=(0,d.iH)([{name:"Наименование и описание товара",field:"name",widthClass:"basis-5/12",type:"text"},{name:"Кол-во",field:"quantity",widthClass:"basis-3/12",type:"quantity"},{name:"Цена",field:"price",widthClass:"basis-3/12",type:"price"},{name:"",field:"delete",widthClass:"basis-1/12",type:"delete"}]);function f(e,n){t.commit("cart/changeQuantity",{...e,value:n.target.value})}function g(e){t.commit("cart/deleteGoodsItem",e)}return{listParams:c,goodsList:l,changeQuantity:f,onDelete:g,total:u,course:n,totalColorClass:s,totalEl:o,totalInt:a,totalFloat:i}}});const Y=(0,b.Z)(A,[["render",M]]);var W=Y,R=(0,r.aZ)({name:"App",created(){this.$store.dispatch("list/init")},components:{goodsCategory:x,cart:W},setup(){const t=(0,v.oR)(),e=(0,r.Fl)((()=>t.getters["list/list"]));return{list:e}}});const K=(0,b.Z)(R,[["render",s]]);var $=K,Q={namespaced:!0,state:{cart:[]},getters:{cart:({cart:t})=>t},mutations:{addToCart(t,{categoryId:e,id:n,count:o,quantity:r}){let a=t.cart.find((t=>t.categoryId===e&&t.id===n));a&&a.quantity+r<=o?t.cart[t.cart.indexOf(a)].quantity+=r:t.cart.push({categoryId:e,id:n,quantity:r})},changeQuantity(t,{categoryId:e,id:n,count:o,value:r}){let a=t.cart.findIndex((t=>t.categoryId===e&&t.id===n));0==r?t.cart.splice(a,1):r<=o&&(t.cart[a].quantity=r)},deleteGoodsItem(t,{categoryId:e,id:n}){let o=t.cart.findIndex((t=>t.categoryId===e&&t.id===n));t.cart.splice(o,1)}},actions:{}},J=JSON.parse('{"B4":{"Z":[{"B":false,"C":158,"CV":null,"G":1,"P":1,"Pl":null,"T":1},{"B":false,"C":197,"CV":null,"G":1,"P":99,"Pl":null,"T":2},{"B":false,"C":18,"CV":null,"G":1,"P":31,"Pl":null,"T":3},{"B":false,"C":2.14,"CV":null,"G":2,"P":15,"Pl":null,"T":8},{"B":false,"C":1.52,"CV":null,"G":2,"P":76,"Pl":null,"T":86},{"B":false,"C":5.5,"CV":null,"G":2,"P":100,"Pl":null,"T":126},{"B":false,"C":2.71,"CV":null,"G":5,"P":51,"Pl":null,"T":184},{"B":false,"C":3.95,"CV":null,"G":5,"P":2,"Pl":null,"T":185},{"B":false,"C":1.22,"CV":null,"G":10,"P":51,"Pl":null,"T":194},{"B":false,"C":1.18,"CV":null,"G":15,"P":55,"Pl":null,"T":12},{"B":false,"C":1.55,"CV":null,"G":15,"P":64,"Pl":null,"T":63},{"B":false,"C":1.55,"CV":null,"G":15,"P":77,"Pl":null,"T":64}]}}'),U=JSON.parse('{"1":{"G":"Книги","B":{"1":{"N":"Алгоритмы. Построение и анализ. Т. Кормен, Ч. Лейзерсон, Р. Ривест, К. Штайн.","T":1},"2":{"N":"Совершенный код. Стив Макконнелл.","T":1},"3":{"N":"JavaScript. Подробное руководство. Дэвид Флэнаган.","T":1}}},"2":{"G":"Еда","C":2,"B":{"7":{"N":"Овсяные пирожные с шоколадной прослойкой","T":3},"8":{"N":"Суп с пекинской капустой","T":3},"85":{"N":"Вишня в коньяке","T":3},"86":{"N":"Постный фаршированный перец","T":3},"109":{"N":"Салат Подсолнух","T":""},"110":{"N":"Форель «Эрланген»","T":""},"111":{"N":"Салат с морепродуктами","T":3},"112":{"N":"Тёртый пирог","T":3},"115":{"N":"Свинина, маринованная в красном вине, с кориандром","T":""},"116":{"N":"Салат с черносливом и ветчиной","T":""},"125":{"N":"Болгарский перец и цуккини на гриле","T":3},"126":{"N":"Салат «Букет нарциссов»","T":3},"127":{"N":"Салат из морепродуктов, с огурцами, рукколой и оливками","T":3}}},"5":{"G":"Спорт","C":2,"B":{"184":{"N":"Беговая дорожка","T":1},"185":{"N":"Гантели съемные","T":1},"186":{"N":"Ружьё охотничье","T":1},"187":{"N":"Велотренажер","T":1}}},"8":{"G":"Сантехника","C":3,"B":{"4":{"N":"Акриловая ванна Alpen Mars ","T":1},"5":{"N":"Смеситель Sturm Classica","T":1},"6":{"N":"Тумба с раковиной Tiffany World ","T":1}}},"10":{"G":"Запчасти для машин","C":3,"B":{"191":{"N":"Амортизатор задний CX-5 ","T":3},"192":{"N":"Пружина амортизатора ","T":3},"193":{"N":"Корпус воздушного фильтра ","T":3},"194":{"N":"Ремень приводной","T":3},"195":{"N":"Диффузор радиатора","T":1},"196":{"N":"Фильтр АКПП","T":3}}},"15":{"G":"Сувениры","C":2,"B":{"11":{"N":"Набор для рисования Пастель","T":3},"12":{"N":"Брелок-рулетка","T":3},"63":{"N":"Брелок-открывалка","T":3},"64":{"N":"Ручка-стилус шариковая","T":3},"146":{"N":"Браслет","T":3},"147":{"N":"Чехол для очков","T":3},"148":{"N":"Сумка для выставок","T":3}}}}');function X(t=20,e=80){return Number((t+Math.random()*(e-t)).toFixed(2))}var tt={namespaced:!0,state:{request:null,list:{},course:0},getters:{list:({list:t})=>Object.values(t).reduce(((t,{id:e,title:n,goods:o})=>{let r={id:e,title:n,goods:Object.values(o)};return t.push(r),t}),[]),rawList:({list:t})=>t,course:({course:t})=>t},mutations:{},actions:{init({state:t,dispatch:e}){e("getData"),t.request=setInterval((()=>{e("getData")}),5e3)},getData({state:t}){const e=X();t.course=e;J.B4.Z.forEach((n=>{let{T:o,G:r,C:a,P:i}=n;a=Number((a*e).toFixed(2));let s=U[r]["B"][o]["N"];t.list[r]?t.list[r]&&!t.list[r].goods[o]?t.list[r].goods[o]={id:o,name:s,price:a,count:i}:t.list[r]&&t.list[r].goods[o]&&(t.list[r].goods[o].price=a):t.list[r]={id:r,title:U[r]["G"],goods:{[o]:{id:o,name:s,price:a,count:i}}}}))}}},et=(0,v.MT)({state:{},getters:{},mutations:{},actions:{},modules:{cart:Q,list:tt}}),nt=n(4427);const ot=(0,o.ri)($);ot.component("g-icon",nt["default"]).use(et).mount("#app")},4427:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return u}});var o=n(3396);function r(t,e,n,r,a,i){return t.currentIcon?((0,o.wg)(),(0,o.j4)((0,o.LL)(t.currentIcon),{key:0})):(0,o.kq)("",!0)}var a=n(4870),i=(0,o.aZ)({props:{name:{type:String,required:!0}},setup(t){const e=(0,a.XI)("");return n(6124)("./"+t.name+".vue").then((t=>{e.value=t.default})),{currentIcon:e}}}),s=n(89);const l=(0,s.Z)(i,[["render",r]]);var u=l},6124:function(t,e,n){var o={"./index.vue":[4427],"./ui/cart.vue":[4138,138]};function r(t){if(!n.o(o,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=o[t],r=e[0];return Promise.all(e.slice(1).map(n.e)).then((function(){return n(r)}))}r.keys=function(){return Object.keys(o)},r.id=6124,t.exports=r}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,o,r,a){if(!o){var i=1/0;for(c=0;c<t.length;c++){o=t[c][0],r=t[c][1],a=t[c][2];for(var s=!0,l=0;l<o.length;l++)(!1&a||i>=a)&&Object.keys(n.O).every((function(t){return n.O[t](o[l])}))?o.splice(l--,1):(s=!1,a<i&&(i=a));if(s){t.splice(c--,1);var u=r();void 0!==u&&(e=u)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[o,r,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,o){return n.f[o](t,e),e}),[]))}}(),function(){n.u=function(t){return"js/"+t+".b8019315.js"}}(),function(){n.miniCssF=function(t){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="js-part:";n.l=function(o,r,a,i){if(t[o])t[o].push(r);else{var s,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==e+a){s=d;break}}s||(l=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",e+a),s.src=o),t[o]=[r];var f=function(e,n){s.onerror=s.onload=null,clearTimeout(g);var r=t[o];if(delete t[o],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((function(t){return t(n)})),e)return e(n)},g=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p="/js-part/"}(),function(){var t={143:0};n.f.j=function(e,o){var r=n.o(t,e)?t[e]:void 0;if(0!==r)if(r)o.push(r[2]);else{var a=new Promise((function(n,o){r=t[e]=[n,o]}));o.push(r[2]=a);var i=n.p+n.u(e),s=new Error,l=function(o){if(n.o(t,e)&&(r=t[e],0!==r&&(t[e]=void 0),r)){var a=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;s.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,r[1](s)}};n.l(i,l,"chunk-"+e,e)}},n.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,a,i=o[0],s=o[1],l=o[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(l)var c=l(n)}for(e&&e(o);u<i.length;u++)a=i[u],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(c)},o=self["webpackChunkjs_part"]=self["webpackChunkjs_part"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(430)}));o=n.O(o)})();
//# sourceMappingURL=app.c01e66d8.js.map